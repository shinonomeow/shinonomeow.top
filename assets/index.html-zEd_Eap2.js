import{_ as n,c as t,a,o as s}from"./app-Cx00pBMU.js";const i={};function o(r,e){return s(),t("div",null,[...e[0]||(e[0]=[a('<p>昨天太无聊了,于是就去折腾了一下 emby 的 302 转发，其实整体上还是很简单的，毕竟已经有了别人的脚本。</p><h2 id="emby-与挂载" tabindex="-1"><a class="header-anchor" href="#emby-与挂载"><span>emby 与挂载</span></a></h2><p>本地挂载用什么和最后能否 302 转发并没有什么关系，出于个人喜欢，我将 emby 内的路径和实体机的路径是一样的。</p><p>这里挂载使用的的 cd2。</p><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-yaml"><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;"> -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /home/shinonome/CloudDrive/115/视频:/home/shinonome/CloudDrive/115/视频</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # Media directory</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="_302-转发" tabindex="-1"><a class="header-anchor" href="#_302-转发"><span>302 转发</span></a></h2><p>转发使用的是 <a href="https://github.com/bpking1/embyExternalUrl/tree/main" target="_blank" rel="noopener noreferrer">这位大佬的</a></p><p>需要注意的是只有三个文件</p><ul><li>constant.js</li><li>include/https.conf</li><li>config/constant-mount.js</li></ul><h3 id="constant-conf" tabindex="-1"><a class="header-anchor" href="#constant-conf"><span>constant.conf</span></a></h3><p><strong>embyHost</strong> 填一个你电脑能访问的地址就好，我这里是 &quot;<a href="http://127.0.0.1:8096%22" target="_blank" rel="noopener noreferrer">http://127.0.0.1:8096&quot;</a></p><p><strong>embyAPI</strong> 自己申请一个复制进来就好</p><p><strong>embyMountPath</strong> 最重要的内容，主要是负责nginx怎么找以及找到后怎么给 alist</p><p>其实理解了这个就很容易知道要怎么填了</p><p>我这里 emby 是挂载到 <code>/home/shinonome/CloudDrive/115/视频</code></p><p>而 alist 中是 <code>/115</code></p><p>那么这里就写 [&quot;/home/shinonome/CloudDrive&quot;]</p><p>也就是告诉以这个开头的要处理，同时剩余的是给 alist 处理的，所以大家映射的时候也别太复杂了</p><h3 id="https-conf" tabindex="-1"><a class="header-anchor" href="#https-conf"><span>https.conf</span></a></h3><p>自己填写自己的证书位置，同时修改一下监听的端口、地址什么的。</p><h3 id="constant-mount" tabindex="-1"><a class="header-anchor" href="#constant-mount"><span>constant-mount</span></a></h3><p><strong>alistAddr</strong> 同embyHost，填你能访问 alist 的地址。</p><p><strong>alistToken</strong> Alist -&gt; 管理 -&gt; 设置 -&gt; 其他 -&gt; 令牌</p><h2 id="nginx" tabindex="-1"><a class="header-anchor" href="#nginx"><span>nginx</span></a></h2><p>我没有使用他提供的docker，而我又没有安装 njs ，所以一开始有报错，安装 njs 导入就好了,详情可抄作者提供的 nginx.conf</p><p>同时我不使用任何 http 的内容，所以我删除了 emby.conf 中关于 http 的内容。</p>',26)])])}const p=n(i,[["render",o]]),l=JSON.parse('{"path":"/speak/f6898a/","title":"emby","lang":"zh-CN","frontmatter":{"title":"emby","createTime":"2024-06-20T17:20:58.000Z","permalink":"/speak/f6898a/","categories":["随笔",2024,"emby","nginx"],"tags":[null]},"readingTime":{"minutes":1.42,"words":425},"git":{"createdTime":1763352764000,"updatedTime":1766890550000,"contributors":[{"name":"shinonomeow","username":"shinonomeow","email":"gtx2shino@gmail.com","commits":2,"avatar":"https://avatars.githubusercontent.com/shinonomeow?v=4","url":"https://github.com/shinonomeow"}]},"filePathRelative":"blog/note/03.emby.md","headers":[],"categoryList":[{"id":"aad653","sort":10000,"name":"note"}]}');export{p as comp,l as data};
